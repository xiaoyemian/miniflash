define("ui/sendAjaxPic",function(e,r){e("jquery");return function(e,r,t,n,o){var s,i=new XMLHttpRequest;new Date;i.onreadystatechange=function(){if(4==i.readyState){if(i.onreadystatechange=null,s&&window.clearTimeout(s),200!=i.status)return r.error&&r.error({description:"系统错误"},t,i.status,n,o);var e=!1;try{var a=JSON.parse(i.response)}catch(u){return e=!0,r.error&&r.error({description:u},t,a,n,o)}!e&&r.success&&r.success(a,t,n,o)}},r.progress&&i.upload.addEventListener("progress",function(e){r.progress(t,e.loaded/e.total,n,o)},!1),i.open("POST",r.behind),i.send(e),r.timeout&&(s=window.setTimeout(function(){r.error&&r.error({description:"上传失败超时"},t),i&&i.abort(),s&&window.clearTimeout(s)},r.timeout))}});
